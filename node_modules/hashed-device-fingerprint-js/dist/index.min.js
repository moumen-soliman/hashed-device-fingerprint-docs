"use strict";var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var b=(r,n)=>{for(var t in n)c(r,t,{get:n[t],enumerable:!0})},x=(r,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of P(n))!v.call(r,s)&&s!==t&&c(r,s,{get:()=>n[s],enumerable:!(i=m(n,s))||i.enumerable});return r};var A=r=>x(c({},"__esModule",{value:!0}),r);var C={};b(C,{generateHashedFingerprint:()=>D});module.exports=A(C);var g=require("js-sha256");async function D(r={}){let{saveToCookie:n=!0,cookieExpiryDays:t=7,useUserAgent:i=!1,useLanguage:s=!1,useScreenResolution:d=!0,usePlatform:f=!0,useConcurrency:w=!0,useIP:l=!0,userIP:u=null,headers:o={},environment:p=typeof window<"u"?"browser":"server",customData:h=null}={...I(),...r};try{let e=[];if(p==="browser"){if(i&&e.push(navigator.userAgent),s&&e.push(navigator.language),d&&(e.push(`${screen.width}x${screen.height}`),e.push(`${screen.colorDepth}-bit`)),f&&e.push(navigator.platform),w&&e.push(`${navigator.hardwareConcurrency} cores`),e.push(`${navigator.maxTouchPoints}`),l)if(u)e.push(u);else{let a=await k();a&&e.push(a)}if(n){let a=new Date;a.setTime(a.getTime()+t*24*60*60*1e3),document.cookie=`hashedFingerprint=${(0,g.sha256)(e.join("||"))}; expires=${a.toUTCString()}; path=/`}}else p==="server"&&(i&&o["user-agent"]&&e.push(Array.isArray(o["user-agent"])?o["user-agent"][0]:o["user-agent"]),s&&o["accept-language"]&&e.push(Array.isArray(o["accept-language"])?o["accept-language"][0]:o["accept-language"]),f&&e.push(process.platform),l&&(u?e.push(u):o["x-forwarded-for"]&&e.push(Array.isArray(o["x-forwarded-for"])?o["x-forwarded-for"][0]:o["x-forwarded-for"])));h&&e.push(h);let y=e.join("||");return(0,g.sha256)(y)}catch(e){throw e instanceof Error?new Error(`Failed to generate fingerprint: ${e.message}`):new Error("An unknown error occurred during fingerprint generation.")}}async function k(){try{let r=await fetch("https://api64.ipify.org?format=json");if(!r.ok)throw new Error("Failed to fetch IP address");return(await r.json()).ip||null}catch(r){return console.error("Error fetching IP address:",r),null}}function I(){return{saveToCookie:!0,cookieExpiryDays:7,useUserAgent:!1,useLanguage:!1,useScreenResolution:!0,usePlatform:!0,useConcurrency:!0,useIP:!0,userIP:null,headers:{},environment:"browser",customData:null}}
